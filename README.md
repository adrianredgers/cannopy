Cannopy - ANN in C++ with pybind11 interface to Python
-
- **Python**
- **Project targets**
- **Project files**
- **in-source** vs **out-of-source**:
- **CLion tips**
- **CMake**
- **Contact**


**Overview**
`cannopy` is a C++ pybind1l shared library available to be imported as a module into Python.
 This project builds the Python module `cannopy.so`, and copies it into 
`$PYTHON_DIST_DIR` so it is available to be imported into Python.

```
$ ./compile.sh
$ ./build/runUnitTests
$ echo $?
0
$ python
Python 2.7.12 (default, Dec  4 2017, 14:50:18) 
[GCC 5.4.0 20160609] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import cannopy
>>> r = cannopy.RAM(3)
>>> addr=[1,1,0]
>>> r.lookup(addr)
0
>>> r.set(addr,1)
>>> r.lookup(addr)
1
>>> r.reset()
>>> r.lookup(addr)
0
>>> exit()
``` 

**Project targets**
- `CannopylLib` - creates shared library `libCannopyLib.so`, used by unit tests and available for any other C++.
- `cannopy` - creates Python (shared library) module `cannopy.so`. Copied to $PYTHON_DIST_DIR.
    - Currently it compiles `CannopyLib` source files twice - once for `libCannopyLib.so` and oce for `cannopy.so`.
    - TODO fix it so it only comiles once.
- `*UnitTests` - executables for running unit tests, these use `libCannopyLib.so`. 


**Project files**
- `CMakeLists.txt` - top-level CMake file that calls the `main` and `test` CMake files.
- `compile.sh` - creates `build` directory, runs `cmake` and then `make`.
- `src\include`
    - Public interfaces for `libCannopyLib.so`, used by tests.
- `src/main`
    - `CMakeLists.txt` - CMake for the main targets: `CannopyLib` and `cannopy`, copies `cannopy.so` to $PYTHON_DIST_DIR.
    - `Adrian_p.h` - private general include definitions.
    - `PyModule.cpp` - defines interface to our C++ library in the Python module `cannopy.so`.
    - `lib/pybind11` - pybind11 source cloned from: `git@github.com:pybind/pybind11.git`.
    - <other source directories> 
- `src/test`
    - `CMakeLists.txt` - top-level CMake for test target: `*UnitTests`.
    - `lib/googletest` - googletest source code.
        - Cloned from: `git@github.com:google/googletest.git`.
- `build` - temporary directory containing targets and artifacts.
    - Auto-generated, not under source code control
    - Regenerated by running `compile.sh`.
- `cmake-build-debug` - another temporary directory.
    - Annoyingly generated by CLion until you set out-of-source dir to `build` (see **CLion tips** below).


**Contact me**
- This is my second attempt at a lot of things - CMake, CLion, googletest, python, pybind11, C++, GitHub, README ml, Licences.
- I would be grateful for any suggestions:-
- aredgers@yahoo.com
        

